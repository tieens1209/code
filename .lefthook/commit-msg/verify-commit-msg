#!/bin/bash

INPUT_FILE=$1
START_LINE=$(head -n1 $INPUT_FILE)

TYPE="feat|fix|build|refactor|docs|chore|ci|style|test|perf|revert"

PATTERN="^($TYPE)\: "

if ! [[ "$START_LINE" =~ $PATTERN ]]; then
  echo "ðŸ¥¹ ChÆ°a Ä‘Ãºng conventional message"
  echo ""
  echo "Pháº£i báº¯t Ä‘áº§u vá»›i $TYPE"
  echo ""
  echo "ðŸ¥¹ VÃ­ dá»¥: feat: add new feature"
  echo "ðŸ¥¹ VÃ­ dá»¥: fix: fix bug"
  echo "ðŸ¥¹ VÃ­ dá»¥: refactor: refactor login flow"
  exit 1
fi

MESSAGE=$(echo $START_LINE | cut -d':' -f 2 | xargs)
if [ ${#MESSAGE} -lt 12 ]; then
  echo "ðŸ¥¹ Your message must be greater than 12 characters"
  exit 1
fi
